<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>


<div id="mainContainer" class="container"> 

  <h3 class="center">Recherche de recettes</h3>

  <div class="row">
    <form class="d-flex" id="formRecherche">
      <div class="row">
        <div class="input-field col s3">
          <input id="saisie" type="text" placeholder="Nom de recette" (keyup)="filtrageNomRecette()">
          </div>

            <p style="margin-top: 44px;">
            <input name="group1" type="checkbox" id="facile" (change)="filtrageDifficulte()"/>
            <label for="facile" style="margin-right: 10px;"> facile </label>
            </p>
       
            <p style="margin-top: 44px;">
            <input name="group1" type="checkbox" id="moyen" (change)="filtrageDifficulte()" />
            <label for="moyen" style="margin-right: 10px;"> moyen </label>
            </p>
         
            <p style="margin-top: 44px;">
            <input name="group1" type="checkbox" id="difficile" (change)="filtrageDifficulte()" />
            <label for="difficile">difficile</label>
            </p>

            <div class="input-field col s3">
              <input id="saisie2" type="text" placeholder="Nom d'ingrédient" (keyup)="filtrageNomIngredient()">
              </div>

              <div class="input-field col s3">
                <input id="saisie3" type="text" placeholder="Nom d'auteur"  (keyup)="filtrageNomAuteur()">
                </div>
                
                <div class="input-field col s3">
                  <input id="saisie4" type="number" min="0" placeholder="Prix limite à ne pas excéder"  (keyup)="filtragePrix()">
                  </div>   

                  <button type="submit" class="btn btn-dark float-end" style="margin-top: 22px; margin-left: 20px;" (click)="reinitialiser()">Reset</button>

          
        </div> 
    </form>
  </div>


  <div class="card-deck" id="listCards">
    <div class="row">
    <div class="col-md-3 mx-auto my-4" *ngFor="let r of recettes; index as index">
      <div class="card h-100 d-flex flex-column">
  
      <img class="card-img-top" src="../../assets/aa835e4a2e2d609558901601d25ed01c.jpg" alt="Card image cap">

      <div class="card-body">

        <h1 class="card-title" style="text-align: center; margin-top: 4px;"><b>{{r['nom']}}</b></h1>
        <p class="card-text" style="text-align:center"><em>Temps de préparation</em> : {{r['tempsDePreparation']}}</p>
        <p class="card-text" style="text-align:center"><em> Difficulté </em>: {{r['difficulte']}}</p>
        <p class="card-text" style="text-align:center"><em> Temps de cuisson </em>: {{r['tempsDeCuisson']}}</p>
        <p class="card-text" style="text-align:center"> <em> Nombre de personnes </em> : {{r['nombrePersonne']}}</p>


        <p style="text-align: center"><em>Liste d'ingrédients : </em></p>
        <ul id="mesIngredients">
            <li *ngFor="let ing of r.ingredients; index as index">
                <p style="text-align:center"> {{ index + 1 }} - {{ ing.nom }} ({{ ing.quantite }} {{ ing.unite}})  </p>
            </li>
        </ul>

        <p class="center" style="font-size: 12px;">De {{ r.recetteAuteur}} le {{r.recetteDate}}</p>

        
     </div>
     <p id="prix" class="center" style="font-size: 20px;">Prix : {{prixRecette(r)}} €</p>
        
        
   
    </div>
    </div>
  </div>
    
</div> 























<!-- <div>
  
  
  <form style="display: flex" [formGroup]="formControl">
    <mat-form-field class="saisieNom">
      <input matInput formControlName="nom" type="text"/>
      <mat-placeholder>Nom</mat-placeholder>
    </mat-form-field> -->
    
    <!-- <mat-form-field>
      <input matInput formControlName="difficulte" type="text"/>
      <mat-placeholder>Difficulte</mat-placeholder>
    </mat-form-field> -->

    <!-- <mat-form-field class="selection" appearance="fill">
      <mat-label>Difficulté</mat-label>
      <mat-select id="test" (selectionChange)="onChange($event)">
        <mat-option value="aucune">aucune</mat-option>
        <mat-option *ngFor="let d of difficulte" [value]="d">
          {{d}}
          </mat-option> -->
        <!-- <mat-option value="facile">facile</mat-option>
        <mat-option value="moyen">moyen</mat-option>
        <mat-option value="difficile">difficile</mat-option> -->
<!-- 
      </mat-select>

    </mat-form-field>






    

    <mat-form-field class="saisieNbPers">
      <input matInput formControlName="nombrePersonne" type="number" />
      <mat-placeholder>Nombre pers.</mat-placeholder>
    </mat-form-field>

    <button mat-raised-button id="btn" class="reset" color="primary" type="submit" (click)="resetFilter()">Reset</button>


  </form> -->





  <!-- <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Id </th>
      <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
    </ng-container>

    <ng-container matColumnDef="nom">
      <th mat-header-cell *matHeaderCellDef> Nom </th>
      <td mat-cell *matCellDef="let element"> {{element.nom}} </td>
    </ng-container>

    <ng-container matColumnDef="tempsDePreparation">
      <th mat-header-cell *matHeaderCellDef> Temps de préparation </th>
      <td mat-cell *matCellDef="let element"> {{element.tempsDePreparation}} </td>
    </ng-container>

    <ng-container matColumnDef="difficulte">
      <th mat-header-cell *matHeaderCellDef> Difficulté </th>
      <td mat-cell *matCellDef="let element"> {{element.difficulte}} </td>
    </ng-container>

    <ng-container matColumnDef="tempsDeCuisson">
      <th mat-header-cell *matHeaderCellDef> Temps de cuisson </th>
      <td mat-cell *matCellDef="let element"> {{element.tempsDeCuisson}} </td>
    </ng-container>

    <ng-container matColumnDef="nombrePersonne">
      <th mat-header-cell *matHeaderCellDef> Nombre de personnes </th>
      <td mat-cell *matCellDef="let element"> {{element.nombrePersonne}} </td>
    </ng-container>

    <ng-container matColumnDef="ingredients">
      <th mat-header-cell *matHeaderCellDef> Ingrédients </th>
      <td mat-cell *matCellDef="let element"> 
        <ul>
          <li *ngFor="let ing of element.ingredients">
            {{ing.nom}}
          </li>
        </ul>
      </td>
    </ng-container> -->



<!-- 
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr> -->

    <!-- <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">Aucun résultat associé à votre recherche
        "{{input.value}}"</td>
    </tr> -->
  <!-- </table>
</div> -->









<!-- <div class="container">
    <mat-form-field appearance="standard">
      <mat-label>Filtre</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Ex. esse" #input>
    </mat-form-field>
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort> -->
      <!-- Id Column -->
      <!-- <ng-container matColumnDef="nom">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Nom </th>
        <td mat-cell *matCellDef="let element"> {{element.nom}} </td>
      </ng-container> -->
    
      <!-- Title Column -->
      <!-- <ng-container matColumnDef="tempsDePreparation">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Temps de préparation </th>
        <td mat-cell *matCellDef="let element"> {{element.tempsDePreparation }} </td>
      </ng-container>
     -->
      <!-- Body Column -->
      <!-- <ng-container matColumnDef="difficulte">
        <th mat-header-cell *matHeaderCellDef> Difficulté </th>
        <td mat-cell *matCellDef="let element"> {{element.difficulte}} </td>
      </ng-container>
    

    </table>
    
  </div>
   -->